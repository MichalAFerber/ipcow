---
layout: page
title: Ping Test
---
<form id="ping-form">
  <label for="host">Enter Host or IP Address:</label>
  <input type="text" id="host" name="host" placeholder="e.g., google.com or 8.8.8.8" required>
  <button type="submit">Ping</button>
</form>
<div id="ping-results"></div>
<script>
  document.getElementById('ping-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const host = document.getElementById('host').value;
    document.getElementById('ping-results').innerHTML = 'Pinging...';
try {
  const startTime = performance.now();
  const response = await fetch(`/api/ping.php?host=${encodeURIComponent(host)}`);
  const endTime = performance.now();
  const latency = (endTime - startTime).toFixed(2);

  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }
  const data = await response.json();
  document.getElementById('ping-results').innerHTML = `
    <p>Ping to ${host}: ${data.success ? `${latency} ms` : 'Failed'}</p>
    ${data.success ? `<p>Average RTT: ${data.average_rtt} ms</p>` : ''}
    ${data.output ? `<pre>${data.output}</pre>` : ''}
  `;
} catch (error) {
  console.error('Error in ping:', error);
  document.getElementById('ping-results').innerHTML = `Error: ${error.message}. Please check the host and try again.`;
}

  });
</script>
