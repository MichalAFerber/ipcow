---
layout: page
title: Port Scanner
subtitle: Check if ports are open on any IP or website.
share-description: "IP Cowâ€™s free Port Scanner lets you check if specific ports are open on an IP address or website, perfect for troubleshooting or security."
# full-width: true
---
<div class="container justify-content-center">
  <form method="GET" action="/api/port-scanner.php">
    <div class="form-label-group">
      <input type="text" class="form-control" id="target" name="target" placeholder="google.com or 8.8.8.8" required autofocus>
      <label for="target">google.com or 8.8.8.8</label>
    </div>
    <div class="form-label-group">
      <input type="text" class="form-control" id="ports" name="ports" placeholder="80,443,21,22" required autofocus>
      <label for="ports">80,443,21,22</label>
    </div>
    <div class="form-group text-center">
      <button type="submit" class="btn btn-lg btn-primary btn-block">Scan Ports</button>
    </div>
    <div id="hcaptcha-widget" class="h-captcha" data-sitekey="1eb25e26-63d0-476a-bcb6-ae62a2b04752"
      data-size="invisible" data-callback="hcaptchaVerifyCallback"></div>
  </form>
</div>

<div id="port-scan-results" style="display: none;"></div>

<!-- Load hCaptcha and custom module -->
<script src="https://js.hcaptcha.com/1/api.js" async defer></script>
<script src="/assets/js/hcaptcha-module.js" defer></script>

<script>
  document.querySelector('form').addEventListener('submit', async (e) => {
    e.preventDefault();
    let target = document.getElementById('target').value.trim();
    let ports = document.getElementById('ports').value.trim();
    const resultsDiv = document.getElementById('port-scan-results');
    resultsDiv.innerHTML = 'Scanning ports...';

    // Clean the target: remove http://, https://, and trailing /
    target = target.replace(/^https?:\/\//, '').replace(/\/+$/, '');

    // Clean and normalize the ports: handle commas, spaces, or both
    const portList = ports
      .replace(/,/g, ' ') // Replace commas with spaces
      .split(/\s+/)       // Split on any whitespace
      .filter(port => port.trim() !== ''); // Remove empty entries
    ports = portList.join(','); // Join back with commas for the API call

    try {
      const startTime = performance.now();
      const response = await fetch(`/api/port-scanner.php?target=${encodeURIComponent(target)}&ports=${encodeURIComponent(ports)}`);
      const endTime = performance.now();
      const latency = (endTime - startTime).toFixed(2);

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      console.log('Response data:', data); // Debug: Log the full response

      // Check for error messages
      if (!data.success || data.error) {
        resultsDiv.innerHTML = data.error || 'Port scan failed.';
        return;
      }

      // Build the table
      let formatted = '<table>';
      formatted += '<tr><th>Detail</th><th>Value</th></tr>';
      formatted += `<tr><td>Target</td><td>${target}</td></tr>`;
      formatted += `<tr><td>Ports Scanned</td><td>${ports}</td></tr>`;
      formatted += `<tr><td>Status</td><td>Completed</td></tr>`;
      formatted += `<tr><td>Response Time</td><td>${latency} ms</td></tr>`;

      // Port results
      const portsData = data.data ? data.data.ports : null;
      if (portsData && Object.keys(portsData).length > 0) {
        formatted += '<tr><td colspan="2"><strong>Port Status</strong></td></tr>';
        for (const [port, status] of Object.entries(portsData)) {
          formatted += `<tr><td>Port ${port}</td><td>${status}</td></tr>`;
        }
      } else {
        formatted += `<tr><td>Result</td><td>No port status returned.</td></tr>`;
      }

      formatted += '</table>';
      resultsDiv.innerHTML = formatted;

      // Add export button if there are port results
      if (portsData && Object.keys(portsData).length > 0) {
        const exportBtn = document.createElement('button');
        exportBtn.textContent = 'Download JSON';
        exportBtn.style.marginTop = '20px';
        exportBtn.className = 'btn btn-primary';
        exportBtn.onclick = () => {
          const exportData = {
            target: target,
            ports_scanned: ports,
            status: 'Completed',
            response_time: `${latency} ms`,
            ports: portsData
          };
          const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `${target}_port_scan.json`;
          a.click();
          URL.revokeObjectURL(url);
        };
        resultsDiv.appendChild(exportBtn);
      }

    } catch (error) {
      console.error('Error in port scan:', error);
      resultsDiv.innerHTML = `Error: ${error.message}. Please check the target or ports and try again.`;
    }
  });
</script>