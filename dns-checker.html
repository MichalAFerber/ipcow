---
layout: page
title: DNS Checker
subtitle: List all DNS records for a domain.
share-description: "IP Cow is a free service that shows you the public IP address of your device along with information about your computer and web browser. IP Cow also offers an Ookla Speedtest and other network resources and tools."
# full-width: true
---
<form method="GET" action="/api/dns-checker.php" style="text-align: center; margin-top: 20px;">
  <input type="text" id="domain" name="domain" placeholder="google.com" required>
  <button type="submit">Check DNS</button>
</form>
<div id="dns-results"></div>
<script>
  document.querySelector('form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const domain = document.getElementById('domain').value;
    document.getElementById('dns-results').innerHTML = 'Loading...';

    try {
      const startTime = performance.now();
      const response = await fetch(`/api/dns-checker.php?domain=${encodeURIComponent(domain)}`);
      const endTime = performance.now();
      const latency = (endTime - startTime).toFixed(2);

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();

      // Check for error messages
      if (!data.success || data.error) {
        document.getElementById('dns-results').innerHTML = data.error || 'No DNS records found.';
        return;
      }

      const records = data.records || [];

      // Map numeric types to readable names and filter RFC8482
      const typeMap = {
        '1': 'A', '28': 'AAAA', '15': 'MX', '2': 'NS', '16': 'TXT', '6': 'SOA', '65': 'HTTPS', '257': 'CAA', '13': 'HINFO'
      };

      // Build the table
      let formatted = '<table>';
      formatted += '<tr><th>Metric</th><th>Value</th></tr>';
      formatted += `<tr><td>Domain</td><td>${domain}</td></tr>`;
      formatted += `<tr><td>Client Latency</td><td>${latency} ms</td></tr>`;
      formatted += '<tr><td colspan="2"><strong>DNS Records</strong></td></tr>';
      formatted += '<tr><th>Type</th><th>Value</th></tr>';

      records.forEach(record => {
        if (record.type && typeMap[record.type]) {
          const type = typeMap[record.type];
          const value = record.data || '';
          if (value.toLowerCase() !== 'rfc8482' || type === 'HINFO') {
            if (value) {
              formatted += `<tr><td>${type}</td><td>${value}</td></tr>`;
            }
          }
        }
      });

      formatted += '</table>';
      document.getElementById('dns-results').innerHTML = records.length > 0 ? formatted : 'No DNS records found for this domain.';

    } catch (error) {
      console.error('Error in DNS lookup:', error);
      document.getElementById('dns-results').innerHTML = `Error: ${error.message}. Please check the domain and try again.`;
    }
  });
</script>